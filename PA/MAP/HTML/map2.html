<!DOCTYPE html>
<html>

<head>
    <title>Peta dari Bandara Silangit ke Bandara Kualanamu</title>
    <link rel="stylesheet" href="/CSS/map.css">
    <script src="https://polyfill.io/v3/polyfill.min.js?features=default"></script>
    <script src="https://maps.googleapis.com/maps/api/js?key=YOUR_API_KEY"></script>
</head>

<body>
    <nav>
        <a class="active" href="#">Map</a>
        <a href="#">Login</a>
        <a href="#">About Us</a>
        <a href="#">Menu Lainnya</a>
    </nav>
    <div id="map"></div>
    <script>
        function initMap() {
            var map = new google.maps.Map(document.getElementById('map'), {
                zoom: 10,
                center: { lat: 2.6738, lng: 98.8215 },
                maxBounds: {
                    north: 4.9,
                    south: 1.2,
                    east: 99.9167,
                    west: 97.8
                }
            });

            var bandaraSilangit = new google.maps.Marker({
                position: { lat: 2.2609, lng: 98.9908 },
                map: map,
                title: 'Bandara Silangit'
            });

            var bandaraKualanamu = new google.maps.Marker({
                position: { lat: 3.6363, lng: 98.8633 },
                map: map,
                title: 'Bandara Kualanamu'
            });

            var directionsService = new google.maps.DirectionsService();
            var directionsDisplay = new google.maps.DirectionsRenderer();
            directionsDisplay.setMap(map);

            function getRoute(startLat, startLng, endLat, endLng) {
                var start = new google.maps.LatLng(startLat, startLng);
                var end = new google.maps.LatLng(endLat, endLng);

                var request = {
                    origin: start,
                    destination: end,
                    travelMode: google.maps.TravelMode.DRIVING
                };

                directionsService.route(request, function (result, status) {
                    if (status == google.maps.DirectionsStatus.OK) {
                        directionsDisplay.setDirections(result);
                        directionsDisplay.setOptions({
                            polylineOptions: {
                                strokeColor: 'blue'
                            }
                        });
                    }
                });
            }

            function onLocationFound(e) {
                var userLat = e.latLng.lat();
                var userLng = e.latLng.lng();

                var userMarker = new google.maps.Marker({
                    position: e.latLng,
                    map: map,
                    title: 'You are here'
                });

                getRoute(userLat, userLng, bandaraKualanamu.getPosition().lat(), bandaraKualanamu.getPosition().lng());
            }

            function onLocationError(e) {
                alert(e.message);
            }

            if (navigator.geolocation) {
                navigator.geolocation.getCurrentPosition(function (position) {
                    var userLatLng = new google.maps.LatLng(position.coords.latitude, position.coords.longitude);
                    map.setCenter(userLatLng);
                    map.setZoom(16);

                    var userMarker = new google.maps.Marker({
                        position: userLatLng,
                        map: map,
                        title: 'You are here'
                    });

                    getRoute(position.coords.latitude, position.coords.longitude, bandaraKualamu.getPosition().lat(), bandaraKualanamu.getPosition().lng());
                                    google.maps.event.addListener(userMarker, 'click', function () {
                        map.setZoom(16);
                        map.setCenter(userMarker.getPosition());
                    });
                }, onLocationError);
                                            } else {
                                                alert("Geolocation is not supported by this browser.");
                                            }

                                            google.maps.event.addListener(bandaraSilangit, 'click', function () {
                                                getRoute(bandaraSilangit.getPosition().lat(), bandaraSilangit.getPosition().lng(), bandaraKualanamu.getPosition().lat(), bandaraKualanamu.getPosition().lng());
                                            });

                                            google.maps.event.addListener(bandaraKualanamu, 'click', function () {
                                                getRoute(bandaraKualanamu.getPosition().lat(), bandaraKualanamu.getPosition().lng(), bandaraSilangit.getPosition().lat(), bandaraSilangit.getPosition().lng());
                                            });

                                        }
                                    </script>
<script async defer src="https://maps.googleapis.com/maps/api/js?key=YOUR_API_KEY&callback=initMap"></script>
</body>

</html>