<!DOCTYPE html>
<html>

<head>
	<title>Peta dari Bandara Silangit ke Bandara Kualanamu</title>
	<link rel="stylesheet" href="/CSS/map.css">
	<link rel="stylesheet" href="https://unpkg.com/leaflet@1.7.1/dist/leaflet.css" />
	<link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@20..48,100..700,0..1,-50..200" />
	<script src="https://unpkg.com/leaflet@1.7.1/dist/leaflet.js"></script>
</head>

<body>
	<header>
		<h1>Wisata Silangit Kualanamu</h1>
		<img src="https://via.placeholder.com/50" alt="Logo">
	</header>
	<nav>
		
		<a id="location-info-btn" href="#"><span class="material-symbols-outlined">
			menu
		</span></a>
		<a class="active" href="#">Map</a>
		<a href="#">Homepage</a>
		<a href="#">Destinasi Wisata</a>
		<a href="#">Akomodasi</a>
		<a href="#">Transportasi</a>
		<a href="#">Kontak</a>
		<a href="#">Blog</a>
		<a href="#">About Us</a>
		<a href="/log-in.html">Login</a>
	</nav>

	<div id="mapid"></div>

	<!-- Tambahkan sidebar -->
	<div id="sidebar" class="sidebar">
		<div class="sidebar-header">
			<h2>Nama Lokasi</h2>
			<div class="menu-btn" id="sidebar-toggle">
				<div class="menu-btn__line"></div>
				<div class="menu-btn__line"></div>
				<div class="menu-btn__line"></div>
			</div>
		</div>
		<div class="sidebar-content">
			<p>Pilih lokasi pada map untuk melihat informasi.</p>
		</div>
	</div>
	<div id="mapid"></div>
	<script>
					// Tambahkan fungsi untuk toggle sidebar
					var sidebarToggle = document.getElementById('sidebar-toggle');
					var sidebar = document.getElementById('sidebar');

					sidebarToggle.addEventListener('click', function () {
						sidebar.classList.toggle('open');
					});

					// Tambahkan event click untuk menu informasi lokasi
					var locationInfoBtn = document.getElementById('location-info-btn');

					locationInfoBtn.addEventListener('click', function () {
						sidebar.classList.add('open');
					});
				

		var map = L.map('mapid', {
			maxBounds: [
				[1.2000, 97.8000],
				[4.9000, 99.9167]
			]
		}).setView([2.6738, 98.8215], 10);

		L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
			attribution: ''
		}).addTo(map);

		var bandaraSilangit = L.marker([2.2609, 98.9908]).addTo(map);
		bandaraSilangit.bindPopup("<b>Bandara Silangit</b><br>Siborong-borong, Tapanuli Utara, Sumatera Utara");

		var bandaraKualanamu = L.marker([3.6363, 98.8633]).addTo(map);
		bandaraKualanamu.bindPopup("<b>Bandara Kualanamu</b><br>Marancar, Batang Kuis, Deli Serdang, Sumatera Utara");

		var currentRoute;

		function getRoute(startLat, startLng, endLat, endLng) {
			var url = 'https://api.openrouteservice.org/v2/directions/driving-car?api_key=YOUR_API_KEY&start=' + startLng + ',' + startLat + '&end=' + endLng + ',' + endLat;
			fetch(url)
				.then(function (response) {
					return response.json();
				})
				.then(function (data) {
					if (currentRoute) {
						currentRoute.removeFrom(map);
					}
					var polyline = L.polyline(data.features[0].geometry.coordinates, { color: 'blue' }).addTo(map);
					map.fitBounds(polyline.getBounds());
					currentRoute = polyline;
				});
		}

		function onLocationFound(e) {
			var userLat = e.latlng.lat;
			var userLng = e.latlng.lng;

			var userMarker = L.marker(e.latlng).addTo(map);
			userMarker.bindPopup("You are here").openPopup();

			if (bandaraKualanamu.getLatLng() && bandaraSilangit.getLatLng()) {
				getRoute(bandaraKualanamu.getLatLng().lat, bandaraKualanamu.getLatLng().lng, bandaraSilangit.getLatLng().lat, bandaraSilangit.getLatLng().lng);
			} else {
				alert('Failed to get airport locations');
			}
		}

		function onLocationError(e) {
			alert(e.message);
		}

		map.on('locationfound', onLocationFound);
		map.on('locationerror', onLocationError);
		map.locate({ setView: true, maxZoom: 16 });

		getRoute();
	</script>

</body>

</html>